# AI颜值管家 - 系统工程架构说明

## 📱 从页面功能层面：系统分为几个端？

### 一、前端应用（4个端）

#### 1. **小程序端**（C端 - 移动端主入口）
- **技术栈**：微信小程序原生 / uniapp
- **用户角色**：终端用户（普通消费者）
- **主要功能**：
  - 用户注册登录
  - 拍照上传评估
  - AI问答咨询
  - 评估报告查看
  - 在线预约
  - 个人中心
  - 内容社区
  - 营销活动
- **访问方式**：微信扫码/搜索进入
- **工程名称建议**：`ai-beauty-miniprogram`

---

#### 2. **H5移动端**（C端 - H5页面）
- **技术栈**：Vue.js 3 + Vite + Vant UI
- **用户角色**：终端用户（通过链接分享访问）
- **主要功能**：
  - 与小程序功能基本一致
  - 主要用于分享传播
  - 可在微信外浏览器打开
  - 支持社交媒体分享落地页
- **访问方式**：直接通过链接访问
- **工程名称建议**：`ai-beauty-h5`
- **说明**：可与小程序共用部分组件和逻辑

---

#### 3. **到店咨询大屏端**（C端 - 线下触点）
- **技术栈**：Vue.js 3 / React + Three.js (3D渲染)
- **用户角色**：到店用户（在咨询室使用）
- **主要功能**：
  - 大屏欢迎界面
  - 3D面部模型展示
  - AI专家全息投影界面
  - 报告解读大屏展示
  - 触控交互（可选）
  - 人机协同服务界面
- **访问方式**：咨询室设备直接访问
- **工程名称建议**：`ai-beauty-store-screen`
- **特点**：大屏适配、视觉效果炫酷、全息硬件对接

---

#### 4. **后台管理系统**（B端 - 管理端）
- **技术栈**：Vue.js 3 + Element Plus / Ant Design Vue
- **用户角色**：
  - 平台运营人员
  - 数据分析师
  - 医疗专家
  - 客服主管
  - 知识管理员
  - 系统管理员
- **主要功能**：
  - 用户管理
  - 内容管理(CMS)
  - 数据运营分析
  - 知识库维护 ⭐
  - 系统配置
  - 权限管理
- **访问方式**：PC浏览器访问（需登录鉴权）
- **工程名称建议**：`ai-beauty-admin`

---

### 二、后端服务（微服务架构）

#### 1. **API网关服务**
- **技术栈**：Spring Cloud Gateway / Kong
- **功能**：请求路由、鉴权、限流、负载均衡
- **工程名称建议**：`api-gateway`

#### 2. **用户服务**
- **功能**：用户注册、登录、认证、用户信息管理
- **工程名称建议**：`user-service`

#### 3. **AI评估服务**
- **技术栈**：Python + FastAPI / Flask
- **功能**：面部照片分析、AI评估、报告生成
- **工程名称建议**：`ai-assessment-service`

#### 4. **AI对话服务**（专家分身）
- **技术栈**：Python + LangChain / 大模型API
- **功能**：AI问答、对话管理、知识检索
- **工程名称建议**：`ai-chatbot-service`

#### 5. **内容服务**
- **功能**：文章、案例、多媒体内容管理
- **工程名称建议**：`content-service`

#### 6. **预约服务**
- **功能**：预约管理、专家排班、订单管理
- **工程名称建议**：`booking-service`

#### 7. **消息服务**
- **功能**：推送通知、短信、站内消息
- **工程名称建议**：`message-service`

#### 8. **数据分析服务**
- **功能**：用户行为分析、转化漏斗、报表生成
- **工程名称建议**：`analytics-service`

#### 9. **知识库服务** ⭐
- **功能**：知识管理、版本控制、知识检索
- **工程名称建议**：`knowledge-base-service`

---

## 📊 工程汇总表

| 序号 | 工程类型 | 工程名称 | 技术栈 | 用户角色 | 优先级 |
|-----|---------|---------|--------|---------|--------|
| **前端工程（4个）** |
| 1 | 小程序 | ai-beauty-miniprogram | 微信小程序/uniapp | C端用户 | P0 |
| 2 | H5移动端 | ai-beauty-h5 | Vue3 + Vite | C端用户 | P0 |
| 3 | 到店大屏 | ai-beauty-store-screen | Vue3/React + Three.js | C端用户（线下） | P1 |
| 4 | 后台管理 | ai-beauty-admin | Vue3 + Element Plus | B端管理员 | P0 |
| **后端工程（9个微服务）** |
| 5 | API网关 | api-gateway | Spring Cloud Gateway | - | P0 |
| 6 | 用户服务 | user-service | Spring Boot/Node.js | - | P0 |
| 7 | AI评估 | ai-assessment-service | Python + FastAPI | - | P0 |
| 8 | AI对话 | ai-chatbot-service | Python + LangChain | - | P0 |
| 9 | 内容服务 | content-service | Spring Boot/Node.js | - | P1 |
| 10 | 预约服务 | booking-service | Spring Boot/Node.js | - | P0 |
| 11 | 消息服务 | message-service | Spring Boot/Node.js | - | P1 |
| 12 | 数据分析 | analytics-service | Python/Java | - | P1 |
| 13 | 知识库 | knowledge-base-service | Python/Java | - | P0 |

**总计**：
- **前端工程：4个**
- **后端工程：9个微服务**
- **合计：13个独立工程**

---

## 🏗️ 工程依赖关系图

```
┌─────────────────────────────────────────────────────────┐
│                    前端应用层（4个）                      │
├─────────────────────────────────────────────────────────┤
│  小程序端     H5移动端    到店大屏端    后台管理系统      │
│    (C)         (C)         (C)          (B)            │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│                    API网关                               │
│              (统一入口、鉴权、路由)                       │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│              业务微服务层（8个）                          │
├─────────────────────────────────────────────────────────┤
│  用户    内容    预约    消息    知识库                   │
│       AI评估    AI对话    数据分析                        │
└─────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────┐
│                  数据存储层                              │
│  MySQL  MongoDB  Redis  OSS  向量数据库                 │
└─────────────────────────────────────────────────────────┘
```

---

## 🎯 各端核心职责

### C端应用（3个）
| 端 | 核心职责 | 页面数量（估算） |
|----|---------|-----------------|
| 小程序端 | 主要流量入口，完整功能 | 20-30个页面 |
| H5移动端 | 分享传播、营销落地页 | 15-20个页面 |
| 到店大屏端 | 线下体验、高端转化 | 5-8个界面 |

### B端应用（1个）
| 端 | 核心职责 | 页面数量（估算） |
|----|---------|-----------------|
| 后台管理系统 | 运营管理、数据分析、知识维护 | 40-50个页面 |

---

## 📝 开发建议

### 前端工程代码复用策略

1. **小程序 + H5 共用逻辑**
   - 使用 uniapp 开发，一套代码编译为小程序和H5
   - 或者使用 Taro 框架
   - 共用组件库、API封装、状态管理

2. **组件库统一**
   - C端：Vant UI / TDesign
   - B端：Element Plus / Ant Design Vue
   - 到店大屏：自定义炫酷组件

3. **公共模块抽离**
   - 创建 `common` 包：工具函数、常量、类型定义
   - 创建 `api` 包：统一API调用封装
   - 创建 `components` 包：通用组件

### 后端工程开发建议

1. **服务拆分原则**
   - 按业务领域拆分（DDD）
   - 高内聚、低耦合
   - 独立部署、独立扩展

2. **服务间通信**
   - 同步调用：gRPC / REST API
   - 异步消息：RabbitMQ / Kafka

3. **统一规范**
   - 统一日志格式
   - 统一错误码
   - 统一API返回格式

---

## 🚀 MVP阶段最小工程集

如果要快速验证商业模式，MVP阶段可以简化为：

### MVP最小集（6个工程）

**前端（2个）**：
1. ✅ 小程序/H5（合并为一个uniapp工程）
2. ✅ 后台管理系统（简化版）

**后端（4个）**：
3. ✅ 用户服务（含API网关功能）
4. ✅ AI评估+对话服务（合并）
5. ✅ 业务服务（合并预约、内容、消息）
6. ✅ 知识库服务

**说明**：MVP阶段可以合并部分微服务，验证成功后再拆分细化。

---

## 💡 技术选型建议

### 方案一：全栈 Node.js
- 前端：Vue.js / React
- 后端：Node.js (Nest.js框架)
- 优点：前后端技术栈统一，团队协作效率高
- 适合：小团队、快速迭代

### 方案二：Java 后端
- 前端：Vue.js
- 后端：Spring Boot / Spring Cloud
- 优点：企业级、稳定性好、生态成熟
- 适合：大型团队、长期维护

### 方案三：Go 后端
- 前端：Vue.js
- 后端：Go (Gin框架)
- 优点：高性能、并发能力强
- 适合：高并发场景、追求性能

### AI服务推荐：Python
- AI评估：Python (TensorFlow/PyTorch)
- AI对话：Python (LangChain + 大模型)
- 原因：AI生态最成熟

---

## 📅 开发排期建议

### 第一期（MVP，2个月）
- Week 1-2: 搭建工程脚手架
- Week 3-4: 小程序核心功能（注册、拍照、评估）
- Week 5-6: AI服务开发（评估+基础问答）
- Week 7-8: 后台管理系统（用户管理+简单知识库）

### 第二期（完善，1.5个月）
- Week 9-10: 小程序完整功能（预约、个人中心）
- Week 11-12: 后台完整功能（CRM、数据分析、知识库完善）

### 第三期（优化，1个月）
- Week 13-14: H5独立开发 + 到店大屏系统
- Week 15-16: 整体测试、优化、上线

**总计：4.5个月（18周）**

---

## 🎬 总结

从页面功能层面来看：
- **前端：4个端** （小程序、H5、到店大屏、后台管理）
- **后端：9个微服务** （可按需合并）
- **总工程数：13个** （MVP阶段可简化为6个）

核心思路：
1. **C端注重体验**：小程序是主战场，H5做分享，大屏做高端体验
2. **B端注重效率**：后台管理系统是运营核心，知识库维护是AI能力保障
3. **后端注重解耦**：微服务架构，独立部署，灵活扩展

希望这个说明能让您清晰了解整个系统的工程架构！

