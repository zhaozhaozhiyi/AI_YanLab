# è·¯å¾„å…¼å®¹æ€§æ–¹æ¡ˆè¯´æ˜

## ğŸ“‹ é—®é¢˜èƒŒæ™¯

é¡¹ç›®åœ¨æœ¬åœ°å’Œ GitHub Pages éƒ¨ç½²æ—¶å­˜åœ¨è·¯å¾„å…¼å®¹æ€§é—®é¢˜ï¼š

| ç¯å¢ƒ | URLç¤ºä¾‹ | ç»å¯¹è·¯å¾„ `/web/index.html` çš„è®¿é—®ç»“æœ |
|------|---------|--------------------------------|
| æœ¬åœ° | `http://localhost:8080/` | âœ… æ­£å¸¸è®¿é—® `http://localhost:8080/web/index.html` |
| GitHub Pages | `https://username.github.io/é€†é¾„å°é¢œ/` | âŒ 404é”™è¯¯ï¼Œè®¿é—® `https://username.github.io/web/index.html` |

**åŸå› **ï¼šGitHub Pages å°†é¡¹ç›®éƒ¨ç½²åœ¨å­ç›®å½•ä¸‹ï¼ˆä»“åº“åï¼‰ï¼Œè€Œç»å¯¹è·¯å¾„ `/` ä¼šæŒ‡å‘åŸŸåæ ¹ç›®å½•ã€‚

---

## ğŸ’¡ è§£å†³æ–¹æ¡ˆ

é‡‡ç”¨**åŠ¨æ€ç›¸å¯¹è·¯å¾„è½¬æ¢**æ–¹æ¡ˆï¼š
- âœ… è‡ªåŠ¨å°†ç»å¯¹è·¯å¾„è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„
- âœ… æ— éœ€æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡
- âœ… æ”¯æŒä»»æ„éƒ¨ç½²ç¯å¢ƒ
- âœ… ä»£ç ç»´æŠ¤ç®€å•

---

## ğŸ”§ æ ¸å¿ƒä¿®æ”¹

### 1. æ ¹ç›®å½•é‡å®šå‘ä¿®å¤

ä¿®å¤äº†æ ¹ç›®å½• `index.html` çš„é‡å®šå‘URLï¼Œç¡®ä¿è·³è½¬åˆ° `/web/` è€Œä¸æ˜¯ `/web`ï¼š

```html
<!-- ä¿®å¤å‰ -->
<meta http-equiv="refresh" content="0;url=./web/index.html">
window.location.href = './web/index.html';

<!-- ä¿®å¤å -->
<meta http-equiv="refresh" content="0;url=./web/">
window.location.href = './web/';
```

**å…³é”®ç‚¹**ï¼šURLæœ«å°¾çš„æ–œæ å¾ˆé‡è¦ï¼
- `/web` â†’ æµè§ˆå™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶
- `/web/` â†’ æµè§ˆå™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªç›®å½•

### 2. é™æ€èµ„æºè·¯å¾„ä¿®å¤

ä¿®å¤äº†æ‰€æœ‰HTMLæ–‡ä»¶ä¸­çš„å…±äº«èµ„æºå¼•ç”¨è·¯å¾„ï¼š

```html
<!-- ä¿®å¤å‰ï¼ˆç»å¯¹è·¯å¾„ï¼Œåœ¨GitHub Pagesä¸Šä¼š404ï¼‰ -->
<script src="/shared/router.js"></script>

<!-- ä¿®å¤åï¼ˆç›¸å¯¹è·¯å¾„ï¼Œå…¼å®¹æ‰€æœ‰ç¯å¢ƒï¼‰ -->
<script src="../../../shared/router.js"></script>  <!-- ä¸‰çº§ç›®å½• -->
<script src="../../shared/router.js"></script>     <!-- äºŒçº§ç›®å½• -->
```

### 3. å››å¤§æ¨¡å—å¯¼èˆªä¿®å¤

ä¿®å¤äº†é¦–é¡µã€è¯„ä¼°ã€ç¤¾åŒºã€æˆ‘çš„å››å¤§æ¨¡å—ä¹‹é—´çš„ç›¸äº’è·³è½¬é—®é¢˜ï¼š

**ä¿®å¤å‰çš„é—®é¢˜**ï¼š
- å„é¡µé¢ä½¿ç”¨ä¸ä¸€è‡´çš„è·¯å¾„æ ¼å¼
- éƒ¨åˆ†é¡µé¢ä½¿ç”¨ç»å¯¹è·¯å¾„ `/web/` å¯¼è‡´GitHub Pages 404
- ç›¸å¯¹è·¯å¾„è®¡ç®—é”™è¯¯å¯¼è‡´è·³è½¬å¤±è´¥

**ä¿®å¤åçš„ç»Ÿä¸€æ ¼å¼**ï¼š
```javascript
// å„é¡µé¢çš„å¯¼èˆªå‡½æ•°ï¼ˆä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ŒRouterè‡ªåŠ¨è½¬æ¢ï¼‰
function goToHome() {
  Router.navigate('/web/');  // è‡ªåŠ¨è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„ï¼Œç¡®ä¿URLæœ«å°¾æœ‰æ–œæ 
}

function goToAssessment() {
  Router.navigate('/web/pages/assessment/index.html');
}

function goToCommunity() {
  Router.navigate('/web/pages/community/index.html');
}

function goToProfile() {
  Router.navigate('/web/pages/profile/index.html');
}
```

### 4. shared/router.js

æ·»åŠ äº† `toRelativePath()` æ–¹æ³•ï¼Œè‡ªåŠ¨è®¡ç®—ç›¸å¯¹è·¯å¾„ï¼š

```javascript
/**
 * å°†ç»å¯¹è·¯å¾„è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„
 * @param {string} absolutePath - ç»å¯¹è·¯å¾„ï¼ˆå¦‚ '/web/index.html'ï¼‰
 * @returns {string} ç›¸å¯¹è·¯å¾„
 */
toRelativePath(absolutePath) {
  // å¦‚æœå·²ç»æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œç›´æ¥è¿”å›
  if (!absolutePath.startsWith('/')) {
    return absolutePath;
  }
  
  // è·å–å½“å‰é¡µé¢çš„ç›®å½•æ·±åº¦
  const currentPath = window.location.pathname;
  const currentParts = currentPath.split('/').filter(p => p);
  const currentDirs = currentParts.slice(0, -1);
  const currentDepth = currentDirs.length;
  
  // æ ¹æ®æ·±åº¦æ„å»ºç›¸å¯¹è·¯å¾„
  let relativePath = currentDepth === 0 ? './' : '../'.repeat(currentDepth);
  return relativePath + absolutePath.substring(1);
}
```

### 2. ä¿®æ”¹ navigate() å’Œ replace() æ–¹æ³•

æ‰€æœ‰è·¯ç”±è·³è½¬éƒ½ä¼šè‡ªåŠ¨è½¬æ¢è·¯å¾„ï¼š

```javascript
navigate(url, params = {}) {
  const relativePath = this.toRelativePath(url);  // è‡ªåŠ¨è½¬æ¢
  const query = new URLSearchParams(params).toString();
  const fullUrl = query ? `${relativePath}?${query}` : relativePath;
  window.location.href = fullUrl;
}
```

### 3. shared/constants.js

æ·»åŠ äº† `getTabBar()` æ–¹æ³•ç”¨äºè·å–è½¬æ¢åçš„å¯¼èˆªæ ï¼š

```javascript
getTabBar() {
  return this.TAB_BAR.map(item => ({
    ...item,
    url: Router.toRelativePath(item.url)
  }));
}
```

---

## ğŸ“ ä½¿ç”¨æ–¹å¼

### âœ… æ¨èç”¨æ³•ï¼ˆè‡ªåŠ¨è½¬æ¢ï¼‰

```javascript
// ç›´æ¥ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ŒRouter ä¼šè‡ªåŠ¨è½¬æ¢
Router.navigate('/web/');  // ç¡®ä¿URLæœ«å°¾æœ‰æ–œæ 
Router.navigate('/web/pages/assessment/guide.html');
Router.checkLogin();  // å†…éƒ¨ä½¿ç”¨ navigateï¼Œè‡ªåŠ¨è½¬æ¢
```

### âœ… æ‰‹åŠ¨è½¬æ¢ï¼ˆå¦‚æœéœ€è¦ï¼‰

```javascript
// è·å–è½¬æ¢åçš„ç›¸å¯¹è·¯å¾„
const relativePath = Router.toRelativePath('/web/index.html');
console.log(relativePath);  // è¾“å‡ºå¦‚ '../../../web/index.html'
```

### âœ… åº•éƒ¨å¯¼èˆªæ 

```javascript
// ä½¿ç”¨ getTabBar() è·å–è½¬æ¢åçš„å¯¼èˆªé¡¹
const tabs = Constants.getTabBar();
tabs.forEach(tab => {
  console.log(tab.url);  // å·²ç»æ˜¯ç›¸å¯¹è·¯å¾„
});
```

---

## ğŸ§ª è½¬æ¢ç¤ºä¾‹

| å½“å‰é¡µé¢ | ç›®æ ‡è·¯å¾„ | è½¬æ¢ç»“æœ |
|---------|---------|---------|
| `/index.html` | `/web/index.html` | `./web/index.html` |
| `/web/index.html` | `/web/pages/auth/login.html` | `./pages/auth/login.html` |
| `/web/pages/auth/login.html` | `/web/index.html` | `../../index.html` |
| `/web/pages/profile/index.html` | `/admin/login.html` | `../../../admin/login.html` |

---

## âœ… å…¼å®¹æ€§éªŒè¯

### æµ‹è¯•é¡µé¢

é¡¹ç›®åŒ…å«ä¸¤ä¸ªæµ‹è¯•é¡µé¢ï¼š

1. **æ ¹ç›®å½•æµ‹è¯•**: `/test-path.html`
   - æµ‹è¯•ä»æ ¹ç›®å½•çš„è·¯å¾„è½¬æ¢
   
2. **ä¸‰çº§ç›®å½•æµ‹è¯•**: `/web/pages/test-from-level3.html`
   - æµ‹è¯•ä»æ·±å±‚ç›®å½•çš„è·¯å¾„è½¬æ¢

### ä½¿ç”¨æ–¹å¼

```bash
# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
npm start  # æˆ– node start.js

# åœ¨æµè§ˆå™¨ä¸­è®¿é—®æµ‹è¯•é¡µé¢
http://localhost:8080/test-path.html
http://localhost:8080/web/pages/test-from-level3.html
```

### é¢„æœŸç»“æœ

- âœ… æ‰€æœ‰ç»å¯¹è·¯å¾„éƒ½èƒ½æ­£ç¡®è½¬æ¢ä¸ºç›¸å¯¹è·¯å¾„
- âœ… ç‚¹å‡»è·³è½¬æŒ‰é’®èƒ½æ­£å¸¸è®¿é—®ç›®æ ‡é¡µé¢
- âœ… æœ¬åœ°å’Œ GitHub Pages éƒ½èƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸš€ éƒ¨ç½²åˆ° GitHub Pages

### 1. æ¨é€åˆ° GitHub

```bash
git add .
git commit -m "ä¿®å¤è·¯å¾„å…¼å®¹æ€§é—®é¢˜ - ä½¿ç”¨åŠ¨æ€ç›¸å¯¹è·¯å¾„"
git push origin main
```

### 2. é…ç½® GitHub Pages

1. è¿›å…¥ä»“åº“ Settings
2. æ‰¾åˆ° Pages è®¾ç½®
3. Source é€‰æ‹© `main` åˆ†æ”¯
4. ç‚¹å‡» Save

### 3. è®¿é—®ç½‘ç«™

è®¿é—®ï¼š`https://ä½ çš„ç”¨æˆ·å.github.io/AIé¢œå€¼ç®¡å®¶/`

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### âœ… æ¨èåšæ³•

1. **ç»Ÿä¸€ä½¿ç”¨ Router.navigate()**
   - ä¸è¦ç›´æ¥ä¿®æ”¹ `window.location.href`
   - ä½¿ç”¨ `Router.navigate()` ä¼šè‡ªåŠ¨è½¬æ¢è·¯å¾„

2. **è·¯å¾„å§‹ç»ˆä½¿ç”¨ç»å¯¹è·¯å¾„æ ¼å¼**
   ```javascript
   // âœ… æ¨è
   Router.navigate('/web/');  // ç¡®ä¿URLæœ«å°¾æœ‰æ–œæ 
   
   // âŒ ä¸æ¨èï¼ˆè™½ç„¶ä¹Ÿèƒ½å·¥ä½œï¼‰
   Router.navigate('../../index.html');
   ```

3. **HTML é“¾æ¥ä½¿ç”¨ onclick è°ƒç”¨ Router**
   ```html
   <!-- âœ… æ¨è -->
   <a href="javascript:void(0)" onclick="Router.navigate('/web/')">é¦–é¡µ</a>
   
   <!-- âŒ ä¸æ¨è -->
   <a href="/web/index.html">é¦–é¡µ</a>
   ```

### âš ï¸ ç‰¹æ®Šæƒ…å†µ

- ç›¸å¯¹è·¯å¾„ä¼šç›´æ¥è¿”å›ï¼Œä¸åšè½¬æ¢
- å¤–éƒ¨é“¾æ¥ä¸å—å½±å“
- hash è·¯ç”±ä¸å—å½±å“

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

1. **é›¶é…ç½®**ï¼šä¸éœ€è¦ç¯å¢ƒå˜é‡æˆ–æ„å»ºå·¥å…·
2. **è‡ªåŠ¨åŒ–**ï¼šæ‰€æœ‰è·¯å¾„è‡ªåŠ¨è½¬æ¢ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†
3. **çµæ´»æ€§**ï¼šæ”¯æŒä»»æ„éƒ¨ç½²ç¯å¢ƒï¼ˆæœ¬åœ°ã€GitHub Pagesã€Gitee Pages ç­‰ï¼‰
4. **å‘åå…¼å®¹**ï¼šä¸å½±å“ç°æœ‰ä»£ç ï¼Œå¹³æ»‘å‡çº§
5. **æ˜“ç»´æŠ¤**ï¼šä»£ç ä¸­ä½¿ç”¨ç»Ÿä¸€çš„ç»å¯¹è·¯å¾„æ ¼å¼ï¼Œæ¸…æ™°æ˜äº†

---

## ğŸ“Š å½±å“èŒƒå›´

### å·²ä¿®æ”¹çš„æ–‡ä»¶

- âœ… `shared/router.js` - æ·»åŠ è·¯å¾„è½¬æ¢åŠŸèƒ½
- âœ… `shared/constants.js` - æ·»åŠ å¯¼èˆªæ è·¯å¾„è½¬æ¢

### è‡ªåŠ¨ç”Ÿæ•ˆçš„åŠŸèƒ½

æ‰€æœ‰ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•çš„ä»£ç éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š

- âœ… `Router.navigate()`
- âœ… `Router.replace()`
- âœ… `Router.checkLogin()`
- âœ… `Router.checkAdminLogin()`
- âœ… `Router.logout()`
- âœ… `Router.adminLogout()`

---

## ğŸ” è°ƒè¯•æŠ€å·§

å¦‚æœé‡åˆ°è·¯å¾„é—®é¢˜ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­è°ƒè¯•ï¼š

```javascript
// æŸ¥çœ‹å½“å‰è·¯å¾„
console.log(window.location.pathname);

// æµ‹è¯•è·¯å¾„è½¬æ¢
console.log(Router.toRelativePath('/web/index.html'));

// æŸ¥çœ‹å½“å‰æ·±åº¦
const parts = window.location.pathname.split('/').filter(p => p);
const depth = parts.slice(0, -1).length;
console.log('å½“å‰æ·±åº¦:', depth);
```

---

## âœ¨ æ€»ç»“

é€šè¿‡è¿™ä¸ªæ–¹æ¡ˆï¼Œé¡¹ç›®ç°åœ¨å¯ä»¥**æ— ç¼éƒ¨ç½²åˆ°ä»»ä½•ç¯å¢ƒ**ï¼Œæ— éœ€ä¿®æ”¹ä»£ç æˆ–é…ç½®æ–‡ä»¶ã€‚æ‰€æœ‰è·¯å¾„éƒ½ä¼šæ ¹æ®å½“å‰é¡µé¢ä½ç½®è‡ªåŠ¨è®¡ç®—ç›¸å¯¹è·¯å¾„ï¼Œç¡®ä¿åœ¨ä»»ä½•éƒ¨ç½²ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸è®¿é—®ã€‚

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-10-12  
**æœ€åæ›´æ–°**: 2025-10-12  
**ç»´æŠ¤è€…**: AI Assistant

